## v7.6.20 — «Конфигурация 1С»: контролы под заголовком (без вылезаний)
**Дата:** 2026‑01‑21

**Что изменили:**
- В строке **Конфигурация 1С** сделали вертикальную компоновку: заголовок/описание сверху, **выпадающий список + тумблер** — ниже.
- На очень узких экранах селект и тумблер становятся в столбик.

**Как проверить:**
1) Открыть «Учётная система (1С)» и менять ширину окна/масштаб: элементы не вылезают за границы карточки.
2) Селект и «Актуальная» остаются читаемыми и кликабельными.

---

## v7.6.19 — Строка «Конфигурация 1С»: нормальная ширина левой части + тумблер «Актуальная»
**Дата:** 2026‑01‑21

**Что изменили:**
- Для строки **Конфигурация 1С** добавлена спец‑верстка: левая часть больше не сжимается в «столбик», на узких экранах строка аккуратно складывается в две строки.
- Кнопка **Актуальная/Неактуальная** заменена на компактный тумблер‑пилюлю с индикатором состояния (без влияния на кнопки шагов ±).

**Как проверить:**
1) Открыть блок «Учётная система (1С)» и уменьшать ширину окна: заголовок/описание слева читаемы, элементы справа переносятся без вылезаний.
2) Нажать «Актуальная» → состояние и подсветка меняются.

---

## v7.6.18 — Фикс «Конфигурация 1С»: перенос и стиль кнопки
**Дата:** 2026‑01‑21

**Что изменили:**
- В строке **Конфигурация 1С** правая часть (dropdown + «Актуальная») теперь переносится и не вылезает за границы.
- Добавлен стиль для кнопки **Актуальная/Неактуальная** (вместо системной).

**Как проверить:**
1) Открыть «Учётная система (1С)» и уменьшать ширину окна: dropdown/кнопка должны переноситься без вылезаний.
2) Кнопка «Актуальная» должна выглядеть в общем стиле и подсвечиваться, когда активна.

---

## v7.6.17 — Ширина колонок + фиксы sticky-результата
**Дата:** 2026‑01‑21

**Что изменили:**
- Расширили рабочую область (max-width) — 3 колонки стали заметно «свободнее».
- Для сетки 3 колонок задали `minmax()` — колонки не ужимаются до состояния «каша».
- Порог перехода 3 → 2 колонки поднят до ~1320px (на 1280px и ниже сразу 2 колонки).
- Верхний sticky‑блок в «Результате» получил непрозрачную подложку (без «налезания» при скролле).

**Почему:**
- На типичных разрешениях результатная колонка была тесной, а sticky выглядел как «перекрытие» из‑за прозрачности.

**Как проверить:**
1) На десктопе открыть главную: 3 колонки должны быть комфортной ширины.
2) Сужать окно до ~1300px → сетка становится 2‑колоночной.
3) Прокрутить вниз по «Результату» → верхний блок (итого/кнопки) остаётся сверху и не просвечивает.

**Риски:**
- На очень узких экранах с масштабом 125%/150% пороги могут ощущаться иначе (но ломаться не должно).

---

## v7.6.15 — Admin Visual/UX
- Админка: добавлены стили в стиле основного сайта (admin.css)
- Админка: toast-уведомления об успехе/ошибках
- Админка: запоминается активная вкладка

## v7.6.16 — Верстка по ТЗ: main / extra / result
**Дата:** 2026‑01‑21

**Что изменили:**
- Главная страница: сетка теперь строго по ТЗ:
  - Колонка 1: «Чек-лист — главное»
  - Колонка 2: «Чек-лист — доп.факторы»
  - Колонка 3: «Результат» (итог + кнопки + пакет/расчёт)
- Адаптив:
  - до ~1180px: 2 колонки (результат справа, чек-листы слева сверху-вниз)
  - до 980px: 1 колонка

**Почему:**
- Чтобы чек-лист не спорил с результатом и менеджер всегда видел «Итого» и кнопки.

**Как проверить:**
1) Открыть главную страницу.
2) На широком экране: 3 колонки (main / extra / result).
3) Уменьшить окно: до ~1100px и <980px — сетка перестраивается.
4) Поставить/убрать несколько галочек — галочки ставятся мгновенно, расчёт обновляется.

**Риски:**
- Если в HTML переименовать id контейнеров чек-листа, нужно обновить `frontend/assets/dom.js`.

# Aurora Checklist — CHANGELOG

Правило проекта: **нет записи — нет релиза**.

Формат записи:
- Версия
- Дата
- Что изменили (коротко)
- Почему
- Как проверить (шаги)
- Риски (что могло сломаться)

---

## v7.6.8 — Документация + логирование админки
**Дата:** 2026‑01‑20

**Что изменили:**
- Добавили папку `docs/`:
  - `CHANGELOG.md` — журнал изменений
  - `TESTCASES.md` — тест‑сценарии регрессии
  - `HOW_IT_WORKS.md` — «как это работает» простыми словами
- Админка: при сохранении `data.json` пишем diff‑лог в `logs/data_changes.log`.

**Почему:**
- Чтобы не терять историю правок и быстрее находить, где и когда «поехало».

**Как проверить:**
1) Запустить проект.
2) Зайти в `/admin`, загрузить `data.json`.
3) Поменять любой текст/цену и нажать «Сохранить изменения».
4) Убедиться, что появился файл `logs/data_changes.log` и в нём есть diff.

**Риски:**
- Если папка `logs/` недоступна для записи — админка всё равно должна сохранять (лог пропускаем).

---

## v7.6.9 — Выбор конфигурации 1С (UI + Word)
**Дата:** 2026‑01‑21

**Что изменили:**
- В UI добавили блок **«Учётная система (1С)»**:
  - выпадающий список конфигураций (из `frontend_shared/data/data.json → onec_configs`)
  - кнопка **«Актуальная/Неактуальная»**
- В Word добавили 1С в:
  - протокол заполнения (вверху)
  - блок «Продукты» внутри ЛТ

**Почему:**
- 1С — один из главных факторов сложности (а ещё это нужно менеджеру в протоколе/КП).

**Как проверить:**
1) Выбрать сегмент.
2) В блоке «Учётная система (1С)» выбрать конфигурацию и переключить «Актуальная».
3) Нажать «Сохранить в Word».
4) Убедиться, что в протоколе и в блоке «Продукты» фигурирует выбранная 1С.

**Риски:**
- Если `onec_configs` пустой/удалён — UI покажет подсказку, но не упадёт.

---

## v7.6.10 — Прозрачность расчёта: «Почему такая стоимость?»
**Дата:** 2026‑01‑21

**Что изменили:**
- В правой панели под «Итого» добавили кнопку **«Почему такая стоимость?»**.
- По кнопке открывается окно с раскладкой:
  - выбранные параметры (сегменты, 1С, юрлица, ККТ, устройства)
  - база пакета
  - какие пункты добавили баллы и сколько это дало в деньгах (внутр.)
  - лицензии/ПО
  - формула итога

**Почему:**
- Чтобы менеджер мог быстро объяснить самому себе (и коллегам), откуда взялась сумма, без ковыряния в JSON/коде.

**Как проверить:**
1) Выбрать сегмент и включить 2–3 галочки (например: +юрлица, +сканеры, ТСД).
2) Убедиться, что сумма пересчиталась.
3) Нажать «Почему такая стоимость?».
4) В окне должны быть: база пакета, доп.баллы, лицензии и итоговая формула.

**Риски:**
- Это «внутренняя» раскладка. Если проект будут показывать клиентам — лучше скрывать кнопку в прод‑режиме.

---

## v7.6.11 — Матрица услуг: какие правила сработали
**Дата:** 2026‑01‑21

**Что изменили:**
- Под «Итого» добавили кнопку **«Матрица услуг»**.
- По кнопке открывается окно‑подсказка с картой правил:
  - какие условия активны (✅) / неактивны (—)
  - какие услуги/баллы добавились и сколько это в деньгах (внутр.)
  - лицензии/ПО и влияние поддержки

**Почему:**
- Чтобы быстро понимать, **почему именно** появились те или иные услуги при выбранных галочках (особенно полезно при обучении коллег).

**Как проверить:**
1) Выбрать сегмент(ы).
2) Включить 2–3 сценария (например: +юрлица, +сканеры, ТСД, «Нет ЭДО» для опта).
3) Нажать «Матрица услуг».
4) Убедиться, что правила подсвечены корректно: активные — с ✅ и с расчётом баллов.

**Риски:**
- Это внутренняя подсказка. В прод‑режиме для клиентов кнопку лучше скрывать.

## v7.6.7 — Word: таблица задач без «заглушек»
**Дата:** 2026‑01‑20

**Что изменили:**
- Таблица задач в конце ЛТ формируется из:
  - состава пакета (`package.inc`)
  - выбранных доп.услуг (`serviceItems`)
  - лицензий (`licItems`)
  - + фикс «Проверка заказчиком» (4950)
- Убрали риск, что останутся строки‑заглушки из шаблона.

**Как проверить:**
1) Выбрать сегмент(ы), включить 2–3 галочки.
2) Скачать Word.
3) В таблице задач должны быть только релевантные услуги.

---

## v7.6.6 — Word: Arial 8 и быстрые настройки админки
**Дата:** 2026‑01‑20

**Что изменили:**
- Word: принудительно выставляем **Arial 8** по документу (включая таблицы/колонтитулы).
- Админка: добавили блок **«Быстрые настройки»** (цены/пакеты/points_model).
- Админка API: исправили валидацию (ожидаем `segments`, а не `packages`).


---

## v7.6.12 — 3 колонки на десктопе, 1 колонка на мобиле
**Дата:** 2026‑01‑21

**Что изменили:**
- Переверстали главную страницу на **3 колонки**:
  - слева — чек‑лист (выборы)
  - по центру — детали (пакет, состав, расчёт по блокам)
  - справа — **итог и действия** (Итого, «Почему такая стоимость?», «Матрица услуг», кнопки)
- Адаптивность:
  - до ~1180px — 2 колонки (итог переносится вниз)
  - до 980px — 1 колонка

**Почему:**
- Чтобы «Итого» и кнопки действий всегда были отдельным фокусом и не терялись среди деталей.

**Как проверить:**
1) Открыть сайт на широком экране (десктоп): должно быть 3 колонки.
2) Уменьшить ширину окна до ~1100px: должно стать 2 колонки, итог уйдёт вниз.
3) Уменьшить до мобильной ширины: всё в 1 колонку, без поломки кнопок/модалок.

**Риски:**
- Если где‑то были завязки на старую двухколоночную структуру — могли «поехать» отступы.

---

## v7.6.13 — Подсказки «что входит» по наведению (popover)
**Дата:** 2026‑01‑21

**Что изменили:**
- Для кнопок **"i"** добавлен **popover при наведении на ПК**:
  - «Состав пакета» (в правой панели у названия пакета)
  - «План Клеверенса» (в блоке устройств, если ТСД > 0)
- На мобильных поведение прежнее: по клику открывается модалка.

**Почему:**
- Чтобы менеджер мог быстро видеть «что входит» одним наведением, без клика.

**Как проверить:**
1) На ПК: навести курсор на кнопку **i** у пакета → должен появиться popover.
2) На ПК: добавить ТСД, навести на **i** у плана Клеверенса → должен появиться popover.
3) На телефоне: тап по **i** открывает модалку (popover не нужен).

**Риски:**
- Если браузер очень старый и не поддерживает `matchMedia('(hover: none)')`, popover может вести себя нестабильно (маловероятно).

---

## v7.6.14 — Админка без JSON: табы, справочники, импорт/экспорт
**Дата:** 2026‑01‑21

**Что изменили:**
- Админка стала «как приложение»: вкладки **Основное / Пакеты / Баллы и лицензии / Справочники**.
- Вкладка **Пакеты**: добавлены кнопки **↑/↓**, **Дублировать**, **Удалить**, **+ Добавить пакет** (без ручного JSON).
- Вкладка **Справочники**: редактор списков **1С конфигураций** и **планов Клеверенса** (с переносом includes по строкам).
- Добавлены кнопки:
  - **Скачать резервную копию** текущего data.json
  - **Импорт JSON** (подставляет в админку, но не сохраняет на сервер, пока не нажмёшь «Сохранить»)
- Добавлена базовая **валидация** перед сохранением (пустые/дублирующиеся ID, пустые названия пакетов).

**Почему:**
- Чтобы 90% правок делались мышкой и понятными полями, а raw JSON был только как «advanced».

**Как проверить:**
1) /admin → Загрузить data.json.
2) Поменять руб/балл, цены пакетов, баллы/лицензии → убедиться, что JSON внизу обновляется.
3) В Пакетах: добавить новый пакет, поднять/опустить, дублировать.
4) В Справочниках: добавить 1С конфигурацию и план Клеверенса.
5) Нажать «Сохранить изменения» → должно сохраниться.
6) Сделать ошибку (например, пустой ID в 1С) → сохранение должно блокироваться с подсказкой.

**Риски:**
- Если пользователи привыкли править raw JSON — теперь он спрятан в Advanced (но доступен).
